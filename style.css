:root{
  --bg:#f7f7f4;
  --ink:#111;
  --line:rgba(17,17,17,.18);
  --muted:rgba(17,17,17,.55);
  --gutter:18px;
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  margin:0;
  background:var(--bg);
  color:var(--ink);
  font-family:Helvetica,Arial,sans-serif;
  -webkit-font-smoothing:antialiased;
  text-rendering:geometricPrecision;
  overflow-x:hidden;
}

/* PC: system cursor off (keep) */
@media (pointer:fine){
  html,body{cursor:none!important}
  .overlay,.drawer,.drawer *{cursor:none!important}
}

/* ===== Topbar ===== */
.topbar{
  position:sticky;
  top:0;
  z-index:100;
  display:flex;
  align-items:center;
  justify-content:space-between;

  padding:
    calc(10px + env(safe-area-inset-top,0px))
    calc(var(--gutter) + env(safe-area-inset-right,0px))
    10px
    calc(var(--gutter) + env(safe-area-inset-left,0px));

  background:rgba(247,247,244,.92);
  backdrop-filter:blur(8px);
  border-bottom:1px solid var(--line);
}

/* left TOP */
.topbar__top{
  font-size:12px;
  letter-spacing:.22em;
  font-weight:300;
  text-transform:uppercase;
  color:var(--ink);
  text-decoration:none;
}

/* right menu button */
.topbar__menu{
  border:none;
  background:transparent;
  padding:10px 0;
  margin:0;
  cursor:pointer;
  -webkit-appearance:none;
  appearance:none;
}

/* burger (3 lines) */
.burger{
  width:28px;
  display:inline-block;
}
.burger i{
  display:block;
  height:1px;
  background:var(--ink);
  opacity:.9;
  margin:6px 0;
}

/* ===== Blank stage ===== */
.stage{
  min-height:calc(100vh - 56px);
  padding:
    18px
    calc(var(--gutter) + env(safe-area-inset-right,0px))
    calc(18px + env(safe-area-inset-bottom,0px))
    calc(var(--gutter) + env(safe-area-inset-left,0px));
}

.stage__blank{
  width:100%;
  height:min(44vh,420px);
  border:1px solid var(--line);
  border-radius:18px;
  background:rgba(255,255,255,.35);
}

/* ===== Overlay ===== */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.08);
  z-index:1000;
}

/* ===== Drawer fullscreen from right ===== */
.drawer{
  position:fixed;
  inset:0;
  z-index:1100;
  transform:translateX(100%);
  transition:transform 220ms ease;
  background:rgba(247,247,244,.98);
}
.drawer.is-open{transform:translateX(0)}

.drawer__inner{
  height:100dvh;
  padding:
    calc(18px + env(safe-area-inset-top,0px))
    calc(var(--gutter) + env(safe-area-inset-right,0px))
    calc(18px + env(safe-area-inset-bottom,0px))
    calc(var(--gutter) + env(safe-area-inset-left,0px));
}

/* header */
.drawer__head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding-bottom:14px;
  border-bottom:1px solid var(--line);
}
.drawer__brand{
  font-size:20px;
  letter-spacing:.06em;
  font-weight:600;
  text-transform:uppercase;
}
.drawer__close{
  border:none;
  background:transparent;
  font-size:28px;
  font-weight:300;
  line-height:1;
  padding:6px 0;
  cursor:pointer;
  color:var(--ink);
}

/* nav */
.drawer__nav{padding-top:16px}

.drawer__section{
  border-bottom:1px solid var(--line);
}

.drawer__row{
  width:100%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;

  padding:18px 0;
  border:none;
  background:transparent;
  cursor:pointer;
  text-align:left;

  -webkit-appearance:none;
  appearance:none;
}

.drawer__label{
  font-size:14px;
  letter-spacing:.18em;
  font-weight:400;
  text-transform:uppercase;
}

.drawer__plus{
  font-size:18px;
  font-weight:300;
  opacity:.8;
}

.drawer__sub{
  padding:0 0 14px;
}

.drawer__link{
  display:block;
  padding:10px 0;
  font-size:12px;
  letter-spacing:.18em;
  text-transform:uppercase;
  text-decoration:none;
  color:var(--ink);
  opacity:.9;
}

.drawer__minor{
  padding-top:18px;
}
.drawer__minorLink{
  display:block;
  padding:10px 0;
  font-size:12px;
  letter-spacing:.18em;
  text-transform:uppercase;
  text-decoration:none;
  color:var(--ink);
  opacity:.65;
}

.drawer__foot{
  position:absolute;
  left:calc(var(--gutter) + env(safe-area-inset-left,0px));
  right:calc(var(--gutter) + env(safe-area-inset-right,0px));
  bottom:calc(14px + env(safe-area-inset-bottom,0px));
  font-size:12px;
  color:var(--muted);
  letter-spacing:.06em;
}

/* iOS highlight off */
.drawer, .drawer *{-webkit-tap-highlight-color:transparent}

/* lock scroll when open */
body.is-locked{overflow:hidden}

/* ===== Pointer FX (あなたの既存CSSが別であるならここは不要) ===== */
#pointer-fx{
  position:fixed;
  top:0;left:0;
  pointer-events:none;
  z-index:1400;
  opacity:0;
  transform:translate3d(-9999px,-9999px,0);
  will-change:transform,opacity;
}
@media (pointer:coarse){
  #pointer-fx{transition:opacity 1000ms linear}
}
#pointer-blob{
  position:absolute;
  top:0;left:0;
  width:92px;height:92px;
  border-radius:999px;
  background:rgba(0,255,90,.9);
  filter:blur(15px);
  transform:translate(-50%,-50%);
  z-index:1;
}
#lockbox{
  position:absolute;
  top:0;left:0;
  transform:translate(-50%,-50%);
  z-index:2;
  opacity:0;
  transition:opacity 120ms ease;
  will-change:opacity;
  color:#000;
}
#lockbox .lockbox__rect{
  width:100px;height:60px;
  border:1px solid currentColor;
  border-radius:2px;
  position:relative;
}
#lockbox .lockbox__cross{
  position:absolute;
  top:50%;left:50%;
  background:currentColor;
  transform:translate(-50%,-50%);
}
#lockbox .lockbox__cross--h{width:17px;height:1px}
#lockbox .lockbox__cross--v{width:1px;height:10px}
#lockbox .lockbox__tick{
  position:absolute;
  background:currentColor;
  opacity:1;
  display:block;
}
#lockbox .lockbox__tick--t{top:0;left:50%;width:1px;height:5px;transform:translateX(-50%)}
#lockbox .lockbox__tick--b{bottom:0;left:50%;width:1px;height:5px;transform:translateX(-50%)}
#lockbox .lockbox__tick--l{left:0;top:50%;width:5px;height:1px;transform:translateY(-50%)}
#lockbox .lockbox__tick--r{right:0;top:50%;width:5px;height:1px;transform:translateY(-50%)}
#lockbox .lockbox__label{
  position:absolute;
  top:50%;left:100%;
  margin-left:8px;
  transform:translate(0,-50%) rotate(90deg);
  transform-origin:left center;
  font-size:8px;
  letter-spacing:.2em;
  font-weight:700;
  white-space:nowrap;
}

/* ===== Mobile safety: make sure topbar height consistent ===== */
@media (max-width:640px){
  :root{ --gutter:16px; }
}